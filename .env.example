# Portalcrane Environment Configuration
# Copy this file to .env and adjust values

# ── Registry ────────────────────────────────────────────────────────────────
REGISTRY_URL=http://registry:5000
# REGISTRY_PUSH_HOST: address used by the HOST Docker daemon for "docker push".
# The daemon runs on the host (via socket mount) and cannot resolve Docker-internal
# hostnames. Use "localhost:5000" since the registry port is published on the host.
REGISTRY_PUSH_HOST=localhost:5000
REGISTRY_USERNAME=
REGISTRY_PASSWORD=

# ── Admin credentials ────────────────────────────────────────────────────────
ADMIN_USERNAME=admin
ADMIN_PASSWORD=changeme

# ── Security ─────────────────────────────────────────────────────────────────
# Generate a strong random key: python3 -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=change-this-secret-key-in-production

# ── OIDC (optional) ──────────────────────────────────────────────────────────
OIDC_ENABLED=false
OIDC_ISSUER=https://your-idp.example.com/realms/myrealm
OIDC_CLIENT_ID=portalcrane
OIDC_CLIENT_SECRET=your-client-secret
OIDC_REDIRECT_URI=http://localhost:8080/auth/callback

# ── Docker Hub (optional, for authenticated pulls) ────────────────────────────
DOCKERHUB_USERNAME=
DOCKERHUB_PASSWORD=

# ── HTTP Proxy (optional) ─────────────────────────────────────────────────────
# Used for outbound calls: Docker Hub API, OIDC discovery, and docker pull/push
# commands launched by the staging pipeline.
# These settings have NO effect on the Docker daemon itself — pulls triggered
# outside of Portalcrane are not affected.
# Format: http://[user:password@]host:port
HTTP_PROXY=
HTTPS_PROXY=
# Hosts that bypass the proxy (comma-separated)
NO_PROXY=localhost,127.0.0.1
# Proxy specifically for docker pull (staging pipeline).
# If empty, falls back to HTTPS_PROXY / HTTP_PROXY above.
DOCKER_PULL_PROXY=


STAGING_DIR=/tmp/staging

# ── Advanced mode ─────────────────────────────────────────────────────────────
# When true, advanced features are shown by default (scan overrides, layer details…)
ADVANCED_MODE=false

# ── Vulnerability scanning (Trivy) ────────────────────────────────────────────
VULN_SCAN_ENABLED=false
VULN_SCAN_SEVERITIES=CRITICAL,HIGH
VULN_IGNORE_UNFIXED=false
VULN_SCAN_TIMEOUT=5m
